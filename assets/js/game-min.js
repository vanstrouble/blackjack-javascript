(()=>{"use strict";let e=[],t=0,r=0,c=Object.create(null);const n=document.querySelector("#btn-request"),o=document.querySelector("#btn-stop"),a=document.querySelector("#btn-new-game"),s=document.querySelector("#player-cards"),l=document.querySelector("#computer-cards"),d=document.querySelectorAll(".score .badge"),u=d[0],i=d[1],m=()=>{const t=["A","J","Q","K"];e=["C","D","H","S"].flatMap((e=>[...Array(9).keys()].map((t=>t+2+e)).concat(t.map((t=>t+e)))));for(let t=e.length-1;t>0;t--){const r=Math.random()*(t+1)|0;[e[t],e[r]]=[e[r],e[t]]}c=Object.create(null);for(const t of e){const e=t.slice(0,-1);c[t]=isNaN(e)?"A"===e?11:10:Number(e)}return e},p=()=>{if(0===e.length)throw"No cards left";return e.pop()},S=e=>c[e],b=(e,t)=>{const r=document.createElement("img");r.src=`assets/cards/${t}.png`,r.classList.add("card-img"),e.appendChild(r)},y=e=>{n.disabled=!e,o.disabled=!e},f=()=>{setTimeout((()=>{r===t?alert("Draw"):t>21||r<=21&&r>t?alert("Computer wins"):alert("CONGRATULATIONS! You win")}),500)},g=e=>{do{const t=p();if(r+=S(t),q(i,r),b(l,t),e>21)break}while(r<e&&e<=21);f()},q=(e,t)=>{e.textContent=`Score: ${t}`};m(),n.addEventListener("click",(()=>{const e=p();t+=S(e),q(u,t),b(s,e),t>21?(y(!1),g(t)):21===t&&(y(!1),f())})),o.addEventListener("click",(()=>{y(!1),g(t)})),a.addEventListener("click",(()=>{e=[],t=0,r=0,u.textContent="Score: 0",i.textContent="Score: 0",s.innerHTML="",l.innerHTML="",y(!0),m()}))})();
